import { google } from '@ai-sdk/google';
import { generateText } from 'ai';

export const runtime = 'edge';

export async function POST(req: Request) {
  try {
    const { message } = await req.json();

    // ğŸ§  å¿«è„‘ä»»åŠ¡ï¼šç”Ÿæˆ 4 ä¸ªæ ¸å¿ƒé˜¶æ®µçš„ç®€çŸ­æè¿°
    const result = await generateText({
      model: google('gemini-1.5-flash'),
      prompt: `
        ä½ æ˜¯ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œè§„åˆ’å™¨ã€‚
        ç”¨æˆ·è¾“å…¥: "${message}"
        
        è¯·ç”Ÿæˆ 4 ä¸ªçº¿æ€§çš„æ‰§è¡Œæ­¥éª¤ï¼Œç”¨ç«–çº¿ "|" åˆ†éš”ã€‚
        æ­¥éª¤å¿…é¡»ç®€çŸ­ã€ä¸“ä¸šï¼Œåƒç³»ç»Ÿæ—¥å¿—ä¸€æ ·ã€‚
        
        ä¾‹å¦‚é—®å¤©æ°”:
        è¯†åˆ«åœ°ç†ä½ç½®ä¸æ—¶é—´|è°ƒç”¨æ°”è±¡å±€APIæ¥å£|è§£æé™æ°´ä¸æ¸©åº¦æ•°æ®|æ¸²æŸ“Excelå›¾è¡¨æ ¼å¼
        
        ä¾‹å¦‚é—®ä»£ç :
        åˆ†æåŠŸèƒ½éœ€æ±‚|æ„å»ºç®—æ³•é€»è¾‘æ¶æ„|ç¼–å†™Pythonæ ¸å¿ƒå‡½æ•°|æ‰§è¡Œè¾¹ç•Œæ¡ä»¶æµ‹è¯•
        
        è¯·ç›´æ¥è¾“å‡ºè¿™4ä¸ªæ­¥éª¤ï¼Œä¸è¦ä»»ä½•å…¶ä»–åºŸè¯ã€‚
      `,
    });

    return new Response(result.text);
  } catch (error) {
    // å…œåº•æ–¹æ¡ˆ
    return new Response("æ·±åº¦è§£æç”¨æˆ·æ„å›¾|æ£€ç´¢å…¨çƒçŸ¥è¯†åº“|æ„å»ºé€»è¾‘æ¨ç†é“¾|ä¼˜åŒ–æœ€ç»ˆè¾“å‡ºæ ¼å¼");
  }
}